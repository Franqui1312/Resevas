{% include 'navbar.html' %} 
{% load static %} 
{% block content %}

<div class="contenedorForm">

    <div class="formulario">

        <div class="row">
            <h1 class="titulo">Reservas</h1>
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{form.as_p}}

                {{ formset.management_form }}
                
                <h3>Servicios</h3>

                <table class="table table-striped table-hover">
                    <thead class="bg-dark text-light">
                        <th>Id</th>
                        <th></th><th></th><th></th>
                        <th>¿Borrar?</th>
                    </thead>
                    <tbody>
                    {% for form in formset %}
                    <tr>
                        <td>{{ form.id.value }}</td>
                        {% for field in form %}
                            <td>{{ field }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>

                <div class="totales">
                    <h3>Totales</h3>

                    <p><strong>Precio Cabaña: </strong> {{ reserva.cabania.precio}}</p>
                    <p><strong>Cantidad Dias: </strong>{{ cantidad_dias }}</p>
                    <p><strong>Total Cabaña: </strong>{{ total_cabania }}</p>
                    <p><strong>Total Servicios x Dia: </strong>{{ total_servicios }}</p>
                    <p><strong>Total Servicios x reserva: </strong>{{ total_servicios_reserva}}</p>
                    
                    <div><p><strong>Total Reserva: </strong>{{total_reserva}}</p></div>
                </div>

                <div class="contenedorBotones">
                    <button class="botonSecundario" type="submit">Guardar</button>
                    <a class="botonSecundario" href="{% url 'lista_reservas' %}">Cancelar</a>
                </div>

            </form>
        </div>

    </div>

</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<script>
    // Configura el campo de autocompletado para el campo cliente
    $(".autocomplete").autocomplete({
        source: "{% url 'search_clients' %}",
    });
</script>


{% endblock %} 